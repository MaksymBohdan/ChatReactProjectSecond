1
00:00:00,810 --> 00:00:05,580
Now that we're able to star in On-Star channels we want those channels to show up and our users start

2
00:00:06,210 --> 00:00:08,260
component.

3
00:00:08,520 --> 00:00:14,610
So had a side panel and in order to display all the channels that are user start we need to have information

4
00:00:14,610 --> 00:00:18,420
about the current user so passed down the current user prompt to start

5
00:00:22,080 --> 00:00:22,980
and then within start

6
00:00:27,310 --> 00:00:33,350
like we have another components will create a user property referencing our current user that we're

7
00:00:33,350 --> 00:00:39,230
passing down and only the user's ref to reach out to our users collection.

8
00:00:39,230 --> 00:00:42,680
So import firebase from a couple of folders up

9
00:00:46,680 --> 00:00:54,070
and the users ref will take the database module and the user's ref.

10
00:00:54,140 --> 00:00:56,360
So when the component mounts we want to set up a listener

11
00:00:59,650 --> 00:01:02,110
so execute a function called out listeners that will create

12
00:01:06,420 --> 00:01:13,890
an add listeners will listen on the users off for any new changes to the starred property.

13
00:01:13,890 --> 00:01:20,430
So first we need to select a child on it according to the users you ID with in component amount we can

14
00:01:21,420 --> 00:01:27,660
set up a conditional to make sure that first we have a value in state for our current user and once

15
00:01:27,660 --> 00:01:36,090
we do we can pass down their ID and will receive that and our listeners function as User ID.

16
00:01:37,110 --> 00:01:43,940
So now we can select the child with the user ID and their start property.

17
00:01:43,950 --> 00:01:48,760
And first we want to listen for when a user stars a new channel.

18
00:01:48,840 --> 00:01:52,920
So listen for the child after the event and then the snap callback will create a variable called Star

19
00:01:52,920 --> 00:01:59,220
Channel where I will assemble an object new object with an id property set to snapshot key and then

20
00:01:59,220 --> 00:02:06,390
spread the rest of the values with the spread operator will spread all of its value to get the rest

21
00:02:06,390 --> 00:02:11,880
of the properties for a given channels information and then we're going to set the state we're going

22
00:02:11,880 --> 00:02:18,280
to update the start channels array by creating a new array where we take all the previous values of

23
00:02:18,480 --> 00:02:23,830
started channels and once again spread them in to the array with the spread operator and add this new

24
00:02:23,830 --> 00:02:24,900
start channel object.

25
00:02:24,900 --> 00:02:33,480
At the very end and we also want to listen for when a channel is unstored will take the users off again.

26
00:02:36,150 --> 00:02:44,190
And select user ID as a child and start as a child and listen for the child removed event.

27
00:02:45,010 --> 00:02:51,880
So here we want to remove some channel information that was previously in our star channels array.

28
00:02:51,910 --> 00:02:58,140
So once again will create an object not assigned to a variable called Channel to remove.

29
00:02:58,300 --> 00:03:05,380
Once again you have the idea of now Otaki will spread the rest of the values for that channel into the

30
00:03:05,680 --> 00:03:12,790
new object or create a variable called Filter channels and are going to take the star channels or use

31
00:03:12,790 --> 00:03:25,020
the filter method on it to make sure this new array doesnt have an element that has an ID property equal

32
00:03:25,020 --> 00:03:33,490
to the ID of the channel to remove object.

33
00:03:33,500 --> 00:03:40,340
And finally we want to update the Sard channels array and state the filtered channels array that we

34
00:03:41,030 --> 00:03:44,020
just created.

35
00:03:44,360 --> 00:03:49,590
Now save all of our files back to our app and now you can see in our start area we have both of the

36
00:03:49,590 --> 00:03:55,260
channels that weve stored we act in javascript so we can click on them and navigate to the channel and

37
00:03:55,260 --> 00:03:59,560
also On-Star them and as we On-Star them you'll see that they are immediately removed.

38
00:04:00,440 --> 00:04:06,550
From the start component we can add them back by favoring them once again.

