1
00:00:00,650 --> 00:00:06,270
When I click on a user to send a direct message to we want to put the channel information the global

2
00:00:06,270 --> 00:00:11,970
stage just like we did for channels component but for the time being we're just logging the data for

3
00:00:11,970 --> 00:00:20,220
the user that we clicked on to change or cancel logging the user data and change that with a call to

4
00:00:20,500 --> 00:00:23,880
his change channel function which takes the user data.

5
00:00:23,940 --> 00:00:25,790
So create change channel.

6
00:00:26,730 --> 00:00:27,710
It takes a user

7
00:00:31,480 --> 00:00:36,980
and we first need to get the channel ID which will store in a variable and will be the return value

8
00:00:37,000 --> 00:00:42,050
of a function that will create called Get Channel ID which takes the user id

9
00:00:44,990 --> 00:00:46,920
so in get channel ID

10
00:00:49,770 --> 00:00:57,060
are going to compare the user ID that we clicked on with the current user id so make the current user

11
00:00:57,060 --> 00:01:08,480
id its own variable check to see if they used that we clicked on ID is less than the authenticated users

12
00:01:08,480 --> 00:01:09,500
ID.

13
00:01:09,740 --> 00:01:16,340
If so we use template literals to interpret the user id and forward slash.

14
00:01:16,670 --> 00:01:21,630
And then the current user ID to create the path of the channel.

15
00:01:21,930 --> 00:01:29,540
Otherwise we put the current user ID first and then the user ID that we clicked on.

16
00:01:29,540 --> 00:01:37,970
So this allows us to make a unique channel identifier for every direct messages channel.

17
00:01:38,500 --> 00:01:46,100
Now we have a channel ID will make this channel data object in our change channel function consists

18
00:01:46,130 --> 00:01:55,610
of an ID equal to channel ID a name equal to user name.

19
00:01:55,820 --> 00:02:04,690
And then we will take this channel data and pass it to our current channel action which we have on our

20
00:02:04,690 --> 00:02:12,700
props or at least we will put on our props first by importing the connect function from reactor's docs

21
00:02:15,680 --> 00:02:21,450
and then importing that current channel from our actions folder

22
00:02:27,350 --> 00:02:31,250
then at the bottom will combine both of them and connect

23
00:02:34,990 --> 00:02:41,710
that NULL to map state to props and then we'll restructure set corrent channel from Mount dispatch to

24
00:02:41,720 --> 00:02:43,560
prop's.

25
00:02:43,600 --> 00:02:50,120
So now we have that current channel on our prop's you also want to execute another action.

26
00:02:50,270 --> 00:02:56,900
Want to put in global state that this is a private channel with the actions that private channel and

27
00:02:56,900 --> 00:03:06,040
passing the value of true within types will create a new channel action type called said private channel

28
00:03:14,110 --> 00:03:25,870
to the actions index file of the new channel action with the same name but in camel case.

29
00:03:26,120 --> 00:03:27,590
So take a boolean.

30
00:03:27,610 --> 00:03:37,910
Joe Cole is private channel to return an object with the type of action from action types Scott said

31
00:03:37,910 --> 00:03:46,340
private channel and the payload would be an object just a property is private channel since the property

32
00:03:46,340 --> 00:03:48,010
name and value are the same.

33
00:03:51,680 --> 00:03:57,740
Then in our reducers folder an index will add a property to initial channel state the initial channel

34
00:03:57,740 --> 00:04:02,850
state object is private channel set to false by default.

35
00:04:03,190 --> 00:04:07,530
Why add a new case for action types.

36
00:04:08,010 --> 00:04:18,080
That said private channel and will in the return spread the state and said Is private channel property

37
00:04:18,080 --> 00:04:21,890
to action up haloed that is private channel

38
00:04:26,350 --> 00:04:33,200
the back and direct messages can use this new action or important

39
00:04:36,560 --> 00:04:37,890
bringing in at the bottom

40
00:04:43,480 --> 00:04:47,310
will save all of our files and test this out.

41
00:04:47,670 --> 00:04:56,920
Go to our redux dev tools and will try clicking on one of our direct messages channels.

42
00:04:59,390 --> 00:05:03,920
We take a look at our channel property we see our new some property is private channel set.

43
00:05:03,950 --> 00:05:04,940
Initially the false

44
00:05:08,940 --> 00:05:14,430
click on our one direct message channel can see that we called Set private channel as well as current

45
00:05:14,430 --> 00:05:15,240
channel.

46
00:05:15,270 --> 00:05:23,270
You see our user at the top of the messages Hetter and that given current channel now the idea is set

47
00:05:23,520 --> 00:05:25,950
this very long path with BIRTON the user IDs

48
00:05:30,490 --> 00:05:32,590
and are also setting is private channel to true.

