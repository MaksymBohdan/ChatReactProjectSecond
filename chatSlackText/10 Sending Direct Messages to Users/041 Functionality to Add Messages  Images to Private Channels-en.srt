1
00:00:00,930 --> 00:00:05,790
One real quick only direct message is channel or a setting is private channel to true within our global

2
00:00:05,830 --> 00:00:08,450
state who look on a public channel.

3
00:00:08,490 --> 00:00:11,880
We're not changing that back to false.

4
00:00:11,940 --> 00:00:18,890
They want to designate that a public channel that we click on is not a private channel and our global

5
00:00:18,890 --> 00:00:19,310
state.

6
00:00:19,480 --> 00:00:20,920
So head to our channels component

7
00:00:23,920 --> 00:00:32,810
and within changed channel will execute that private channel pass and a value falls to it.

8
00:00:35,870 --> 00:00:46,010
And we'll bring in the private channel from our actions folder and the structure from map dispatched

9
00:00:46,010 --> 00:00:52,170
to props and connect will save our channels component

10
00:00:55,300 --> 00:00:59,770
and first click on a direct messages channel where he said is private channel the true then a public

11
00:00:59,770 --> 00:01:00,580
channel.

12
00:01:00,580 --> 00:01:07,270
Now we're setting it back to force the next thing we'll do is head back to apologise or we'll use maps

13
00:01:07,380 --> 00:01:10,710
to props to get the current value of his private channel.

14
00:01:10,720 --> 00:01:17,440
We need to know whether a given channel that we're in is private and a number of places within our messages

15
00:01:17,440 --> 00:01:18,520
component.

16
00:01:19,090 --> 00:01:26,380
So grab that value from apps it's a prop's pass it down to our app component or the structure from the

17
00:01:26,380 --> 00:01:34,430
prop's object and pass it down again using props to our messages component where it will receive the

18
00:01:34,450 --> 00:01:39,690
messages state their value as the property private channel

19
00:01:44,300 --> 00:01:47,800
in the first place will use it is within our display channel name function.

20
00:01:49,130 --> 00:01:54,220
We want to display private channels differently than public channels within the body.

21
00:01:54,220 --> 00:02:02,660
This function now will check to see or past the channel and then if so we use a template literal to

22
00:02:02,660 --> 00:02:03,900
set up a turnaround.

23
00:02:04,300 --> 00:02:06,920
Or will check to see if it's a private channel.

24
00:02:06,920 --> 00:02:10,830
If so prefix the channel name within at symbol.

25
00:02:10,830 --> 00:02:16,140
Otherwise a hash mark for a public channel will add the channel name with channel name.

26
00:02:16,190 --> 00:02:23,590
Otherwise if it's not a channel we'll just return an empty string then grab the private channel value

27
00:02:23,590 --> 00:02:30,750
from say and pass down that value with props once again to our messages are important.

28
00:02:30,900 --> 00:02:40,890
We want to use this to conditionally show our star icon star icon will soon be a button which will use

29
00:02:40,890 --> 00:02:43,240
to star in On-Star channels.

30
00:02:43,440 --> 00:02:49,040
Set up a conditional surrounding it to check if it's not a private channel.

31
00:02:49,050 --> 00:02:52,790
If it is a public channel only then will we show the star icon.

32
00:02:52,830 --> 00:03:02,970
Will users be able to soon star a given channel then will pass down as private channel with profs once

33
00:03:02,970 --> 00:03:11,280
again to our message form component and here we'll use that value to determine the file path where we're

34
00:03:11,370 --> 00:03:12,480
uploading a given file.

35
00:03:12,480 --> 00:03:19,020
So instead of the file popping chat slash public we'll interpolate interpellation execute a function

36
00:03:19,020 --> 00:03:25,020
a new function called Get path which will determine which path we should use based on whether the channel

37
00:03:25,020 --> 00:03:26,980
that we're in is private or public.

38
00:03:27,450 --> 00:03:36,040
So then get path if it's a private channel we're going to return a custom path based on the channel

39
00:03:36,040 --> 00:03:50,040
Id return once again using template literals chat slash private and then slash or or dash channel ID

40
00:03:50,790 --> 00:03:54,200
from the state object.

41
00:03:54,340 --> 00:04:01,670
Otherwise the public channel will just return chat slash public and back within our messages component

42
00:04:02,640 --> 00:04:06,180
will create a new property called private messages.

43
00:04:06,320 --> 00:04:13,640
We're going to create a new raft a new raft which will reference a new collection within our database

44
00:04:14,000 --> 00:04:15,370
called private messages.

45
00:04:18,480 --> 00:04:22,020
This is where all of our private messages from private channels will be stored

46
00:04:25,100 --> 00:04:29,240
and will create a function within the messages component called get messages.

47
00:04:29,720 --> 00:04:35,660
So this will be important in a couple of cases returning which rap we should use when sending a message

48
00:04:37,430 --> 00:04:42,440
will restructure a few values from stay within this function.

49
00:04:42,490 --> 00:04:48,470
Messages are private messages and private channel will be quite simple.

50
00:04:48,490 --> 00:04:53,540
If it's a private channel that we're in we're going to use the private messages.

51
00:04:53,650 --> 00:04:55,970
Otherwise the message is rock

52
00:04:59,320 --> 00:05:06,420
so we'll use this in our ad message listener were previously using just the messages from say so create

53
00:05:06,420 --> 00:05:14,310
a variable called ref or will execute messages ref and change that with messages.

54
00:05:17,180 --> 00:05:20,000
Then we'll pass that down to our message form be approx

55
00:05:24,320 --> 00:05:27,820
And we'll also use it within the upload file function

56
00:05:30,520 --> 00:05:38,560
and this ref variable Well now references up Propst I get messages ref were well executed and here within

57
00:05:38,740 --> 00:05:48,290
send message will also pluck off from our prop's object that messages ref and use it here in sending

58
00:05:48,290 --> 00:05:50,480
off our message.

59
00:05:50,570 --> 00:05:58,670
So now so so sending both a text message as well as an image message on our direct messages channel

60
00:05:59,780 --> 00:06:01,060
for one user that we have

61
00:06:06,280 --> 00:06:13,830
that looks like we can send text content and if we try getting an image file that sends a message

62
00:06:22,730 --> 00:06:24,160
looks like that successful too.

63
00:06:24,190 --> 00:06:32,860
So our get messages right and all of the changes that we made in our configuration seem to be working

64
00:06:33,850 --> 00:06:34,740
properly.

65
00:06:34,780 --> 00:06:36,100
We head back to our database.

66
00:06:36,160 --> 00:06:45,540
You see our private messages collection or if we drill down we can see two messages within our 1 channel

67
00:06:45,840 --> 00:06:53,130
a content a message with text content and one with image content.

68
00:06:53,200 --> 00:07:00,120
If we had to our storage area and click on the chat folder then we see this private folder with the

69
00:07:00,120 --> 00:07:00,840
channel ID

70
00:07:04,290 --> 00:07:08,150
if we drill into that we can see the one image file that we added.

